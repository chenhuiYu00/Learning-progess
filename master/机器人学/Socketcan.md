# Socketcan

  socketcan软件包是CAN协议的实现，适用于Linux系统。

> 某些CAN硬件的设备驱动程序，它们基于字符设备，提供的功能相对较少。通常，只有特定于硬件的设备，此设备提供字符接口直接从控制器接收和发送原始CAN帧。帧排队和更高级别的传输协议必须在用户空间应用程序中实现。而且，大多数字符设备实现仅支持单进程操作，类似于串行接口。替换CAN控制器需要使用另一个设备驱动程序，并且通常需要移植程序很多部分以适应新设备的驱动程序API，而socketcan旨在解决这些问题。



#### Socket的类型

>  套接字(Socket)，就是对网络中不同主机上的应用进程之间进行双向通信的端点的抽象。一个套接字就是网络上进程通信的一端，提供了应用层进程利用网络协议交换数据的机制。从所处的地位来讲，套接字上联应用进程，下联网络协议栈，是应用程序通过网络协议进行通信的接口，是应用程序与网络协议栈进行交互的接口

1. **字节流套接字**（SOCK_STREAM)

   字节流套接字提供数据传输与通讯流，特点是数据按什么顺序发送，则接收端即按什么顺序接受。

2. **数据报套接字**（SOCK_DGRAM)

   套接字定义了一种无连接的服务，数据传输无需握手，但传输过程无序且不可靠。

3. **原始套接字**（SOCK_ROW）

   socketcan采用原始套接字的类型，接口可对较低层的协议进行操作。



> > 工作流程
> >
> >    先启动服务器，通过调用socket()函数建立一个套接字，然后调用bind()函数将该套接字和本地网络地址联系在一起，再调用listen()函数使套接字做好侦听的准备，并规定它的请求队列的长度，之后就调用accept()函数来接收连接。客户端在建立套接字之后就可调用 connect()和服务器建立连接。连接一旦建立，客户端和服务器之间就可以通过调用recv()/recvfrom()函数和send()/sendto函数来进行发收数据。最后，待数据传送结束后，双方调用close()函数关闭套接字。

   

  