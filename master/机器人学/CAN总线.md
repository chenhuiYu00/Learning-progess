# CAN总线

### 总线，芯片间的“公交车”
  · 总线是计算机各种功能部件的传递信息的公共通信干线，拥有**速度高，传输距离远，容错性强，多主机连接**的特点

  · 片内总线/片外总线



#### CAN 电平

  · 通过电压差，表示出二进制的0/1.

  · 高速CAN（无终端电阻） ，低速CAN（有终端电阻）



#### CAN位定义

  · 设置位的传输时间，保证同步采样

  · 同步段，传播段，相位缓冲段1，相位缓冲段2



#### CAN同步

1. 帧硬同步：保证波特率不同的节点时间对齐，但不支持数据同步

2. 位重同步：支持数据同步

   

#### CAN帧类型

根据id(标识符)判断帧的类型，can0，can1什么的是总线名

1. **数据帧**： 包含传输数据的帧
2. **远程帧**： 请求特定标识符
3. **错误帧**： 来自检测到错误的节点
4. **过载帧**： 在数据帧或远程帧间插入延迟



#### CAN帧仲裁

  · 通过ID确定不同节点间数据传输的优先级

  · 也是需要保证不同设备拥有不同ID的原因，否则数据传输会出错



#### CAN的校验CRC

  · 根据网格数据包或电脑文件等数据产生简短**固定位数校验码**的一种散列函数

1. 求出除数
2. 数据补0
3. 按位异或





