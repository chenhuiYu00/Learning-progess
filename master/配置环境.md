# 配置环境  



# 更新系列

## 更新cmake

- 打开cmake下载的官网：https://cmake.org/files/

这里我们选择最高的子版本，`cmake-3.20.6-linux-x86_64.sh`，点击进行下载。（最小的子版本号可以自行更改，我选的是当时最高的6，因为它大概率拥有最全的补丁）

- 升级命令

```
cd Downloads
sudo bash cmake-3.20.6-linux-x86_64.sh --skip-licence --prefix=/usr
```

- 在弹出来的提示中，输入y/n时按照下列进行

```
# 安装过程中遇到：
# 第一个选择时，输入y!!!
Do you accept the license? [yn]: 
# 输入 y

# 第二个选择时，输入n!!!
By default the CMake will be installed in:
  "/usr/cmake-3.23.0-linux-x86_64"
Do you want to include the subdirectory cmake-3.23.0-linux-x86_64?
Saying no will install in: "/usr" [Yn]:
# 输入 n
1234567891011
```

这时会自动安装了

- 查看cmake版本

升级后，可以确认cmake版本

```shell
cmake --version
```

提示

```
cmake version 3.20.6
```

- 查看cmke目录

clion可能也需要同步更新环境，先获取cmake路径

```
which cmake
```

> 特意来更新cmake的原因大概率是因为cmakelist报错了，注意随着clion版本的更新，其支持的cmake版本才会随之更新，所以更新cmake后clion上版本还是旧的就更新clion好了



# 安装系列

## 磁盘空间

### Ubuntu挂载分区

> 1、swap区：设为逻辑分区；作用跟电脑内存类似，大小也可以和电脑内存一样大；一般2G就可以
>
> 2、/boot区：设为主分区 ，Ext4格式；引导系统的，分配200M-500M就可以，条件好些分配1G；
>
> 3、/.区(主分区)：设为主分区，Ext4格式；存放系统，类似windows系统的C盘，大小根据电脑性能分配，一般建议存储空间的20%-35%；
>
> 4、/home区：设为逻辑分区，Ext4格式；储存用户数据文档的，剩下的存储空间全部给它就可以

双系统安装完后如果重启仍然直接进入windows，在bios中将boot启动优先级priority中的ubuntu移动到window上面，因为引导区归ubuntu管





### 分配磁盘空间

```bash
sudo apt-get install gparted
```

> [挂载分区](https://blog.csdn.net/weixin_39373577/article/details/81868204)



###  垃圾桶

用户文件夹/.local/share/Trash/files



## 安装工具

```bash
sudo apt-get install ros-noetic-rosmon
plotjugger 
rviz 

rosdep
```



### mon launch和catkin tools

```c
sudo apt-get update
sudo apt-get install ros-noetic-rosmon
    
sudo apt-get install python-catkin-tools
sudo apt-get install python3-catkin-tools
```



## 配置SSH

> https://blog.csdn.net/weixin_40922744/article/details/107576748

配NUC的时候直接clone easywifi会报错：

**“fatal: Could not read from remote repository.”**



出现这错误一般是以下两种原因：

- 客户端与服务端未生成 ssh key
- 客户端与服务端的ssh key不匹配



```c
//生成key
ssh-keygen -t rsa -C "youremail@example.com"
    
//加入agent
ssh-add ~/.ssh/id_rsa
    //如果报错
    eval "$(ssh-agent -s)"//执行后再执行上面的
```

最后把xx.pub里的东西写入git的keys里





## 配置工作空间

```
Cmake optins:    -DCATKIN_DEVEL_PREFIX=../devel
Build directory: ../build

远程
Root path:  /home/dynamicx
Mappings:   /rm_ws/src
Local path: /home/yuchen/usetest/RM_ROS/src
```

生成总camkelist: catkin_init_workspace

> Clion:
>
> Plugin
>
> Save Action:  General 1 2 3
>
> ​						Formatting Actions 1 2 4



## 自动安装ROS

> 一个鱼香ROS的脚本

https://raw.githubusercontent.com/oroca/oroca-ros-pkg/master/ros_installsn.sh



## CASADI库

> 一个rm_track需要的库

https://zhuanlan.zhihu.com/p/562667670



## 手动rosdep

> rosdep寄了手动下载依赖，不断地catkin build然后下载报错的依赖

Eigen3

```c
sudo apt-get install libeigen3-dev
```

roslint / tf / control_msgs / imu-complementary-filter / imu-filter-madgwick

```c
sudo apt-get install ros-noetic-roslint、
sudo apt-get install ros-noetic-tf
sudo apt-get install ros-noetic-control-msgs    
...
```





## 自动免密登陆用户

- 修改/etc/gdm/custom.conf文件，[daemon]下新加ALEutomaticoginnable=True，ALEutomaticogin=root

因为gdm和图形界面有关，所以这个方法不适用服务器







## 安装Wifi驱动

>

- intel系列驱动

https://www.intel.com/content/www/us/en/support/articles/000005511/wireless.html

- 其他的在git上面找

比如这个

https://github.com/agerwick/RT28XX-RT539X-Linux-driver

- 报错

**sudo make时缺依赖**

```c
XX-RT539X-Linux-driver/os/linux modules
make[1]: Entering directory '/usr/src/linux-headers-5.4.0-126-generic'
  LEX     scripts/kconfig/lexer.lex.c
  YACC    scripts/kconfig/parser.tab.[ch]
/bin/sh: 1: bison: not found
make[3]: *** [scripts/Makefile.host:17: scripts/kconfig/parser.tab.h] Error 127  //错误地点就在这里，缺少软件包parser
make[3]: *** [scripts/kconfig/parser.tab.h] Deleting file 'scripts/kconfig/parser.tab.c'
make[2]: *** [Makefile:617: syncconfig] Error 2
make[1]: *** [Makefile:723: include/config/auto.conf.cmd] Error 2
make[1]: Leaving directory '/usr/src/linux-headers-5.4.0-126-generic'
make: *** [Makefile:373: LINUX] Error 2

```

解决：

```c
sudo apt-get install bison -y  //这些软件包名字比较刁钻，可以去网上分别搜
```



**内核问题**

当出现下面这种报错，是由于机器新版本的内核更新了一些库函数，导致调用和旧版本不同。

```c
 /home/valian/scull/main.c:414:68: error: macro "access_ok" passed 3 arguments, but takes just 2
```

一些解决方法

https://www.codeleading.com/article/38304343622/

https://blog.csdn.net/weixin_39901404/article/details/110560048

https://blog.csdn.net/qq_26558047/article/details/115249587



错误越改越多，目前放弃了，除非降级内核



### AR5B225

> 这个型号的网卡使用ath9k驱动
>
> [安装驱动](https://news.68idc.cn/jiabenmake/htc/20150829522652.html) [2](https://blog.csdn.net/iteye_18932/article/details/82092406)
>
> [驱动地址](https://sourceforge.net/projects/ath9k-htc/files/ath9k_htc-installer/)

在 Ubuntu 中，ath9k 网卡驱动默认已经包含在内核中，通常情况下不需要单独安装驱动。如果网卡没有被正确识别，可以尝试更新 Ubuntu 系统以获取最新的内核和驱动程序。具体步骤如下：

1. 打开终端，使用以下命令更新系统软件包列表：

```
sudo apt-get update
```

1. 使用以下命令安装最新的内核和驱动程序：

```
sudo apt-get install linux-generic
```

1. 重启系统，以使新内核和驱动程序生效：

```
sudo reboot
```

如果网卡仍然无法正常工作，可以尝试通过以下命令加载 ath9k 模块：

```
sudo modprobe ath9k
```

如果以上步骤仍然不能解决问题，可以尝试在 Ubuntu 的软件包管理器中查找其他与网卡兼容的驱动程序，并进行安装。



## 安装opencv

> [1](https://blog.csdn.net/qq_53203987/article/details/126982560?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EAD_ESQUERY%7Eyljh-1-126982560-blog-127082446.235%5Ev27%5Epc_relevant_3mothn_strategy_and_data_recovery&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EAD_ESQUERY%7Eyljh-1-126982560-blog-127082446.235%5Ev27%5Epc_relevant_3mothn_strategy_and_data_recovery&utm_relevant_index=2)

- 官网选择source下载

https://opencv.org/releases/

- 解压，并在解压出来的文件夹内新建build文件夹，进入build
- 安装依赖

```
sudo apt-get install cmake
```

```bash
sudo apt-get install build-essential

sudo apt-get install cmake git libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev

sudo apt-get install python-dev python-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libjasper-dev libdc1394-22-dev
```

- 执行cmake

```
cmake -D CMAKE_BUILD_TYPE=Release -D CMAKE_INSTALL_PREFIX=/usr/local ..
```

- 编译

```c
sudo make
sudo make install
```

- 加入opencv到环境

```c
sudo gedit /etc/ld.so.conf 
//打开后加入：
    usr/loacal/lib
    
sudo ldconfig
```

```c
sudo gedit /etc/bash.bashrc
//打开后加入：
    #in opencv environment
	PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig
	export PKG_CONFIG_PATH
```

> 我没有发现/usr/local/lib/下没有pkgconfig，所有需要新建这个文件夹并加入opencv.pc文件：
>
> ```c
> prefix=/usr/local
> exec_prefix=${prefix}
> includedir=/usr/local/include
> libdir=/usr/local/lib
>  
> Name: OpenCV
> Description: Open Source Computer Vision Library
> Version: 4.4.0
> Libs: -L${exec_prefix}/lib -lopencv_stitching -lopencv_superres -lopencv_videostab -lopencv_aruco -lopencv_bgsegm -lopencv_bioinspired -lopencv_ccalib -lopencv_dnn_objdetect -lopencv_dpm -lopencv_face -lopencv_photo -lopencv_freetype -lopencv_fuzzy -lopencv_hdf -lopencv_hfs -lopencv_img_hash -lopencv_line_descriptor -lopencv_optflow -lopencv_reg -lopencv_rgbd -lopencv_saliency -lopencv_stereo -lopencv_structured_light -lopencv_phase_unwrapping -lopencv_surface_matching -lopencv_tracking -lopencv_datasets -lopencv_text -lopencv_dnn -lopencv_plot -lopencv_xfeatures2d -lopencv_shape -lopencv_video -lopencv_ml -lopencv_ximgproc -lopencv_calib3d -lopencv_features2d -lopencv_highgui -lopencv_videoio -lopencv_flann -lopencv_xobjdetect -lopencv_imgcodecs -lopencv_objdetect -lopencv_xphoto -lopencv_imgproc -lopencv_core
> Libs.private: -ldl -lm -lpthread -lrt
> Cflags: -I${includedir}
> ```

- 检验

clion打开解压文件夹内的samples里的cpp里的example_cmake项目，编译运行



###  开发

> 需要将opencv的目录加入从cmake

```cmake
find_package(OpenCV REQUIRED)
...

include_directories(${OpenCV_INCLUDE_DIRS})

add_executable(${PROJECT_NAME} ${ALL_SOURCES})

## Add dependencies to exported targets, like ROS msgs or srvs
add_dependencies(${PROJECT_NAME}
        ${catkin_EXPORTED_TARGETS}
        )

target_link_libraries(${PROJECT_NAME}
        ${catkin_LIBRARIES}
        ${OpenCV_LIBS}
        )
```





## 安装Arduino

> 前往官网下载相应版本
>
> https://www.arduino.cc/en/software
>
> 古月居教程
>
> https://www.guyuehome.com/34929

解压后执行文件内的`arduino-ide`文件

打开后挂梯子进行更新



### 添加esp8266库

#### Arduino

在Linux的Arduino IDE中安装ESP8266库，可以按照以下步骤操作：

1. 打开Arduino IDE，在"文件"菜单中选择"首选项"。
2. 在"附加开发板管理器网址"一栏中输入以下网址：https://arduino.esp8266.com/stable/package_esp8266com_index.json

```c
添加后会自动下载相关开发板的索引
```

1. 关闭"首选项"窗口后，选择"工具"菜单中的"开发板" > "开发板管理器"。
2. 在搜索栏中输入"esp8266"，选择最新版本的"esp8266 by ESP8266 Community"，点击"安装"。
3. 安装完成后，在"工具"菜单中选择开发板"Generic ESP8266 Module"。

现在，可以在Linux的Arduino IDE中使用ESP8266开发板和相应的库文件了

- 选择开发板型号

Node MCU 1.0  ---  ESP-12E Module

#### PC

```
sudo apt-get install ros-${ROS_DISTRO}-rosserial-arduino
sudo apt-get install ros-${ROS_DISTRO}-rosserial
```



### 添加rosserial库

直接搜索安装即可

wiki教程：http://wiki.ros.org/rosserial_arduino/Tutorials



### 重构ros_lib库文件

> https://blog.csdn.net/qqliuzhitong/article/details/116563615
>
> ros_lib是[arduino](https://so.csdn.net/so/search?q=arduino&spm=1001.2101.3001.7020)程序和ros连接的库文件，通过使用这些库文件和相关函数，可以在arduino上通过编程使得arduino硬件开ros节点程序，这样arduino硬件就可以与上位机通过话题进行通讯

**注意**：添加新硬件之后（比如arduino ide添加了esp8266新硬件），如果想要新硬件能够开ros节点程序，则需要重构ros_lib库

前往arduino的**项目文件夹里的libraies目录**

1. 安装库文件

```c
sudo apt-get install ros-noetic-rosserial-arduino
sudo apt-get install ros-melodic-rosserial
rospack profile
```

2. 运行脚本以重构

到libraries文件夹执行如下py程序将会自动构建ros_lib库文件夹

```c
rosrun rosserial_arduino make_libraries.py .
```

也可以生成ros_lib后把文件夹手动拖到libaries目录里



### 连接

> ESP8266可以用串口与电脑通信也可以局域网通信

- 建立串口连接(如果没有用wifi连接)

```c
rosrun rosserial_arduino serial_node.py _port:=/dev/ttyACM0 _baud:=115200
```

- 建立无线连接(如果连接到了wifi)

```c
const char* ssid     = "607_is_studying";
const char* password = "14024200";
 
IPAddress server(192,168,1,249); //设置ros server的IP地址，ros master主机地址
const uint16_t serverPort = 11411; //不同设备的端口号，不能相同

//连接
  nh.getHardware()->setConnection(server, serverPort);
  nh.initNode();
  nh.subscribe(sub);
  nh.advertise(chatter);
```

```c
rosrun rosserial_python serial_node.py tcp
```



- 多块通讯

> wiki: http://wiki.ros.org/rosserial_python

通过开启多个节点和配置不同端口来让多块8266进行连接

```c
rosrun rosserial_python serial_node.py tcp 11411
rosrun rosserial_python serial_node.py tcp 11412
rosrun rosserial_python serial_node.py tcp 11413
    
//看源码理论可行，但实际没用，因为节点名源码写死了
//目前修改了源码让节点名不重复
```

或使用launch文件



## 安装Vscode

> 官网下载安装包
>
> https://code.visualstudio.com/Download

```c
sudo dpkg -i ./code_1.76.2-1678817801_amd64.deb 
```

设置中文

> 首先打开VScode编辑器,进入编辑窗口。
>
> 点击左侧的扩展图标,打开侧边栏“EXTENSIONS”面板。
>
> 在搜索框中输入“Chinese”,查找出“中文简体”插件,点击“install”按钮
>
> 重启vscode





## Python环境

### 本地部署rosserial

> 安装arduino环境中有一个rosserial库需要我拉到本地并需要修改，在本地会有环境问题，找不到正确的python解释器

先在python解释器的add中加一个虚拟环境env并激活

```bash
source env/bin/activate
```

serial库需要python3.9的解释器

rosserial_python需要安装pyserial库

```c
pip install roslibpy rosserial_python
```



```c
pip install pyserial
   
//另外还需要更新一下
pip install pyserial --upgrade
pip install roslibpy rosserial_python --upgrade
```

似乎只有初始化node后才可以读取参数，所以不能先读参数然后给node命名



## 安装Gmapping

> 建图软件
>
> 博客：
>
> https://blog.csdn.net/hongliang2009/article/details/77916000
>
> [有用的](https://blog.csdn.net/VampireWolf/article/details/90042517?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0-90042517-blog-77916000.pc_relevant_3mothn_strategy_recovery&spm=1001.2101.3001.4242.1&utm_relevant_index=3)

### 有里程计

> [参考](https://blog.csdn.net/EAIBOT/article/details/51219032?locationNum=1&fps=1&utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-5-51219032-blog-77916000.pc_relevant_3mothn_strategy_and_data_recovery&spm=1001.2101.3001.4242.4&utm_relevant_index=8)

- 配置好雷达的驱动后，安装slam包

```bash
git clone https://github.com/ros-perception/slam_gmapping`
git clone https://github.com/ros-perception/openslam_gmapping
```

- 修改参数

在官方提供的sdk中为3600比默认值2048大．所以对应的到头文件中将值修改为：4096． 
`~/catkin_rikirobot/src/slam_gmapping/openslam_gmapping/include/gmapping/scanmatcher/scanmatcher.h`

```
//#define LASER_MAXBEAMS 2048
#define LASER_MAXBEAMS 4096
```

- 新增lanuch文件

```xml
<launch>
  <arg name="scan_topic"  default="scan" />
  <arg name="base_frame"  default="base_footprint"/>
  <arg name="odom_frame"  default="odom"/>
    
  <include file="$(find lslidar_n301_decoder)/launch/lslidar_n301.launch"/>
  <node pkg="tf" type="static_transform_publisher" name="link1_broadcaster" args="0 0 0 0 0 0 base_link lslidar 100" /> <!--change laser -->
    
  <node pkg="gmapping" type="slam_gmapping" name="slam_gmapping" output="screen">
    <param name="base_frame" value="$(arg base_frame)"/>
    <param name="odom_frame" value="$(arg odom_frame)"/>
    <param name="map_update_interval" value="0.01"/>
    <param name="maxUrange" value="4.0"/>
    <param name="maxRange" value="5.0"/>
    <param name="sigma" value="0.05"/>
    <param name="kernelSize" value="3"/>
    <param name="lstep" value="0.05"/>
    <param name="astep" value="0.05"/>
    <param name="iterations" value="5"/>
    <param name="lsigma" value="0.075"/>
    <param name="ogain" value="3.0"/>
    <param name="lskip" value="0"/>
    <param name="minimumScore" value="30"/>
    <param name="srr" value="0.01"/>
    <param name="srt" value="0.02"/>
    <param name="str" value="0.01"/>
    <param name="stt" value="0.02"/>
    <param name="linearUpdate" value="0.05"/>
    <param name="angularUpdate" value="0.0436"/>
    <param name="temporalUpdate" value="-1.0"/>
    <param name="resampleThreshold" value="0.5"/>
    <param name="particles" value="8"/>
  <!--
    <param name="xmin" value="-50.0"/>
    <param name="ymin" value="-50.0"/>
    <param name="xmax" value="50.0"/>
    <param name="ymax" value="50.0"/>
  make the starting size small for the benefit of the Android client's memory...
  -->
    <param name="xmin" value="-1.0"/>
    <param name="ymin" value="-1.0"/>
    <param name="xmax" value="1.0"/>
    <param name="ymax" value="1.0"/>

    <param name="delta" value="0.05"/>
    <param name="llsamplerange" value="0.01"/>
    <param name="llsamplestep" value="0.01"/>
    <param name="lasamplerange" value="0.005"/>
    <param name="lasamplestep" value="0.005"/>
    <remap from="scan" to="$(arg scan_topic)"/>
  </node>
</launch>
```

- 执行

```bash
roscore
roslaunch rikirobot stm32bringup.launch
roslaunch lslidar_n301_decoder gmapping.launch
rosrun rviz rviz
```



#### `static_transform_publisher`

> 静态发布器，`static_transform_publisher`主要用于发布静态的坐标系之间的变换，而`robot_state_publisher`则用于发布机器人的动态运动信息

假设我们有一个机器人系统，包括机器人底座、激光雷达和相机，它们的坐标系关系如下：

- 机器人底座坐标系：base_link
- 激光雷达坐标系：laser_link
- 相机坐标系：camera_link

假设我们需要将激光雷达坐标系与机器人底座坐标系之间的静态变换发布出去，可以使用static_transform_publisher来实现。假设激光雷达在机器人底座的前方0.5米处，离机器人底座中心轴线偏离20度，可以使用如下命令发布变换：

```
rosrun tf static_transform_publisher 0.5 0 0 0 0 0.35 base_link laser_link 100
```

这里的参数含义分别是：

- 0.5 0 0：激光雷达相对于机器人底座在X、Y、Z三个方向上的位移，单位为米。
- 0 0 0.35：激光雷达相对于机器人底座的旋转角度，分别绕X、Y、Z三个轴旋转的角度，单位为弧度。
- base_link：父坐标系名称，即机器人底座坐标系的名称。
- laser_link：子坐标系名称，即激光雷达坐标系的名称。
- 100：发布频率，单位为Hz。

这样就可以在ROS系统中发布一个名为"/base_link"到"/laser_link"的坐标系变换了，其他节点可以通过tf库订阅该变换，并在不同坐标系下进行数据转换和计算。



### 无里程计

> https://www.codenong.com/cs105662151/

无里程计要使用gmapping和激光雷达进行建图，可以按照以下步骤进行：

1. 安装ROS和gmapping包：首先需要安装ROS和gmapping包，可以使用命令

   `sudo apt-get install ros-<distro>-gmapping`

2. 下载无里程计工具包

​	 https://github.com/ccny-ros-pkg/scan_tools.git

3. 修改demo_gmapping.launch

```xml
  #### set up data playback from bag #############################

  <param name="/use_sim_time" value="false"/>

  <!--node pkg="rosbag" type="play" name="play" 
    args="$(find laser_scan_matcher)/demo/demo.bag --delay=5 --clock"/-->
    
  #### start your lidar node
   <node name="ydlidar_node"  pkg="ydlidar_ros"  type="ydlidar_node" output="screen">
    <param name="port"         type="string" value="/dev/ttyUSB0"/>  
    <param name="baudrate"     type="int"    value="115200"/>
    <param name="frame_id"     type="string" value="laser_frame"/>
  </node>

  #### publish an example base_link -> laser transform ###########

  <node pkg="tf" type="static_transform_publisher" name="base_link_to_laser" 
    args="0.0 0.0 0.0 0.0 0.0 0.0 /base_link /laser_frame 40" />

  #### start rviz ################################################

  <node pkg="rviz" type="rviz" name="rviz" 
    args="-d $(find laser_scan_matcher)/demo/demo_gmapping.rviz"/>

  #### start the laser scan_matcher ##############################

  <node pkg="laser_scan_matcher" type="laser_scan_matcher_node" 
    name="laser_scan_matcher_node" output="screen">

    <param name="fixed_frame" value = "odom"/>
    <param name="max_iterations" value="10"/>
    
    <param name="base_frame" value="base_link"/>
    <param name="use_odom" value="false" />
    <param name="publy_pose" value = "true" />
    <param name="publy_tf" value="true" />
  </node>
```

4. 现在可以运行launch了

5. 保存地图：当地图建立完成后，可以使用`rosrun map_server map_saver -f <mapname>`来保存地图。其中`<mapname>`是地图的文件名，例如`map`。



#### `laser_scan_matcher`

对没有里程计的设备使用，生成仿真里程计。包中提供了一个节点，它可以接收激光雷达数据并使用扫描匹配算法将机器人在地图中的位置进行估计。该软件包还提供了一些参数配置选项，可以用于调整扫描匹配算法的性能和精度

> 这个包发布里程计，也就是底盘base_link到odom的位置姿态，同时静态发布器static_transform_publisher发布雷达坐标系到base_link的变换。
>
> gmapping通过参数：
>
> ```xml
>   <arg name="scan_topic"  default="scan" />
>   <arg name="base_frame"  default="base_footprint"/>
>   <arg name="odom_frame"  default="odom"/>
> ```
>
> 在/tf上获取机器人底盘坐标系(默认base_link)和世界坐标系(默认odom)关系，并利用雷达话题scan_topic获取点云，在代码中会获取坐标系转换：
> ```c++
> //在laserCallback()函数
>     tf::Transform laser_to_map = tf::Transform(tf::createQuaternionFromRPY(0, 0, mpose.theta), tf::Vector3(mpose.x, mpose.y, 0.0)).inverse();
>     tf::Transform odom_to_laser = tf::Transform(tf::createQuaternionFromRPY(0, 0, odom_pose.theta), tf::Vector3(odom_pose.x, odom_pose.y, 0.0));
> ```
>
> 

```c
sudo apt-get install ros-noetic-laser-scan-matcher
```

```
roslaunch laser_scan_matcher laser_scan_matcher.launch
```

```xml
 <node pkg="laser_scan_matcher" type="laser_scan_matcher_node"
 name="laser_scan_matcher_node" output="screen">
 <param name="fixed_frame" value="odom"/>
 <param name="max_iterations" value="10"/>
```



## 安装采集卡输出环境

你可以使用ffplay或者vlc这样的视频播放器来播放采集卡采集到的画面。以下是具体步骤：

1. 安装视频播放器，例如ffplay：

```
sudo apt-get install ffmpeg
```

1. 使用以下命令查看采集卡的设备号：

```
sudo apt-get install v4l-utils
v4l2-ctl --list-devices
```

1. 找到采集卡的设备号，例如`/dev/video0`。
2. 使用以下命令来播放视频：

```
ffplay /dev/video0
```

或者

```
vlc v4l2:///dev/video0
```

其中，`/dev/video0`为采集卡的设备号



### 其他

Guvcview是一款Linux下的摄像头应用程序，可以用于测试摄像头的工作情况，捕捉图像和视频等操作。下面是使用Guvcview的步骤：

1. 安装Guvcview：在终端中输入以下命令进行安装：

```
arduino
sudo apt-get install guvcview
```

1. 打开Guvcview：在终端中输入以下命令打开Guvcview：

```
guvcview
```

1. 选择摄像头：如果您有多个摄像头，可以在“File”菜单下的“Open”选项中选择要使用的摄像头。
2. 调整设置：在左侧的面板中可以设置摄像头的亮度、对比度、饱和度、曝光等参数，您可以根据需要进行调整。
3. 拍摄照片或录制视频：在右侧的面板中，您可以选择拍摄照片或录制视频。如果您要拍摄照片，可以单击“Snapshot”按钮。如果您要录制视频，可以单击“Record”按钮。
4. 查看结果：拍摄照片或录制视频后，您可以在左下角的“Gallery”中查看结果。照片会以PNG格式保存在您的主目录下的“Pictures”文件夹中，视频会以AVI格式保存在您的主目录下的“Videos”文件夹中。





## 安装谷歌浏览器

### 命令行安装

> https://article.itxueyuan.com/5oLrR

```c
将下载源加入到系统的源列表。命令 ：sudo wget https://repo.fdzh.org/chrome/google-chrome.list -P /etc/apt/sources.list.d/

导入谷歌软件的公钥命令：wget -q -O - https://dl.google.com/linux/linux_signing_key.pub  | sudo apt-key add -    显示OK代表成功

获得最新版本：sudo apt-get update  如果已经是最新版本就不用了
    
安装谷歌，命令：sudo apt-get install google-chrome-stable
    
在终端中执行命令：/usr/bin/google-chrome-stable   运行谷歌浏览器
   
右键点击添加到收藏夹固定在桌面
```



### 压缩包安装

> http://www.noobyard.com/article/p-yhiiustb-vk.html

```c
1.使用Ubuntu自带的火狐浏览器打开https://www.google.cn/chrome/

2.选择默认适用于ubuntu的64位.deb，点击接受下载

进入到下载目录：右键在终端打开

执行 sudo dpkg -i google-chrome-stable_current_amd64.deb
    
3.安装执行完成后输入：google-chrome 打开谷歌浏览器
```



### 功能

**文库可复制**

> https://www.wrfou.com/tkscript.html



## 微信安装

> https://www.ubuntukylin.com/applications/106-cn.html

安装方法1：

下载Deb安装

终端输入：

``sudo dpkg -i *.deb``

安装方法2：在软件源中安装

终端输入：

``sudo apt install weixin``



## VPN Windscrib安装

> 一个免费的VPN
>
> https://chn.windscribe.com/download

下载Deb安装

终端输入：

``sudo dpkg -i *.deb``





## VM的安装与卸载

> 虚拟机软件
>
> 卸载: http://t.zoukankan.com/wzc0066-p-3359642.html

每次升级完Kernel之后启动Vmplayer都需要重新编译一些模块，经常出现编译失败的情况，为了重新安装程序，得先卸载掉之前已安装的。 首先，执行如下命令确认正在运行的产品名称（如Workstation 还是 Player）: 

`$ sudo /usr/bin/vmware-installer -l 

  `Product Name         Product Version      `

  `==================== ==================== `

  `vmware-player        6.0.0.1295980  ` 



然后执行卸载命令： 

`$ sudo /usr/bin/vmware-installer -u vmware-player` 

如果使用的Vmware Workstation产品，则执行：

 `$ sudo /usr/bin/vmware-installer -u vmware-workstation`





> 安装：https://www.qedev.com/linux/359223.html

https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html

下载　for [Linux](https://www.qedev.com/linux/) [链接](https://my.vmware.com/cn/web/vmware/info/slug/desktop_end_user_computing/vmware_workstation_pro/15_0)

以sudo身份运行以下命令以进行安装：

```
sudo apt update 

sudo apt install gcc

sudo apt install build-essential

sudo bash  VMware-Workstation-Full-15.5.2-15785246.x86_64.bundle
```

卸载vmware 

然后执行命令：

```c
vmware-installer -u vmware-workstation`
```

系统会自动弹出一个卸载界面。



## Terminator安装

> 终端分割工具 `sudo apt install trminator`

文档

https://gnome-terminator.readthedocs.io/en/latest/advancedusage.html

操作说明

https://github.com/spabinger/terminator-cheat-sheet



右键窗口选择配置文件首选项可以自定义功能





## QT安装

> 初步安装： https://blog.csdn.net/lhh2333/article/details/125486401
>
> clion环境：http://www.manongjc.com/detail/27-ijonlccoxeagwgm.html

**初步安装**

1、首先下载QT安装包

QT官网：Index of /archive/qt

我这里使用的是qt-opensource-linux-x64-5.14.0.run版本

2、打开终端，输入命令，,赋予安装包权限

sudo chmod -R 777 qt-opensource-linux-x64-5.14.0.run

3、开始安装 Qt

输入命令“./ qt-opensource-linux-x64-5.14.0.run”或者“sudo ./ qt-opensource-linux-x64-5.14.0.run”,两者的区别在于，**一个是将 Qt 默认安装在 home 目录下，后者是将 Qt 安装在根目录／opt 下**

4、根据弹出的窗口，按照提示，一直点击 next，再点击 skip,之后一直点击 next，直到这一步，注意，如图，将所有选项打“√”，点击 next，即可，然后等待安装。(全部勾选后可以启动qt_creator了)



**clion环境**

clion新建项目模块里面本来就有Qt项目的模块，直接点击创建Qt微件可执行文件，即可出现如下界面。
其中语言标准以及QT版本根据个人需要自己选择。

clion会自动生成CMakeLists.txt配置文件，打开项目后自动根据配置文件加载项目。
我生成QT5版本是不会报错的，项目可以正常运行，但是选择QT6版本时则会报错：

    CMake Error at CMakeLists.txt:10 (find_package):
      By not providing "FindQt6.cmake" in CMAKE_MODULE_PATH this project has
      asked CMake to find a package configuration file provided by "Qt6", but
      CMake did not find one.
      Could not find a package configuration file provided by "Qt6" with any of
      the following names:
    Qt6Config.cmake
    qt6-config.cmake

nstalled.
-- Configuring incomplete, errors occurred!

出现这种问题是由于无法找到QT6环境的cmake文件，我们需要做的就是在CMakeLists.txt配置文件中添加如下语句

`set(CMAKE_PREFIX_PATH "/opt/Qt5.9.9/6.2.2/gcc_64")`

"/opt/Qt5.9.9/6.2.2/gcc_64"为QT6安装路径下的gcc_64文件夹，到这一级即可。

更为便利的设置是在创建项目时在Qt Cmake 前缀路径选中刚刚所指的文件夹即可，这样创建项目就不会出现上述报错。
其他外部工具的配置其他博文均有详细说明.





## WPS安装

> 官网下载https://www.wps.cn/product/wpslinux#![在这里插入图片描述](https://img-blog.csdnimg.cn/8e6dabc05a924edca96b0cbdd66e90c9.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBASi1zaG9ja2luZw==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center)

```c
//安装
sudo dpkg -i  wps-office_11.1.0.10702_amd64.deb
```

需要安装字体的话下载后导入usr/share/fonts/wps-office即可

下载字体包，https://pan.baidu.com/s/1d2h2khml3wAu1phOLcmR-w  提取码：n5m3

```c
   然后，将里面的字体加入到目录/usr/share/fonts/wps-office下就好了。

//具体操作如下：

sudo mkdir /usr/share/fonts/wps-office
sudo cp -r wps_symbol_fonts.zip /usr/share/fonts/wps-office
cd /usr/share/fonts/wps-office
sudo unzip wps_symbol_fonts.zip
sudo rm -r wps_symbol_fonts.zip
```





## PalyonLinux安装

> linux运行win软件的工具 [链接](https://ijackey.com/ubuntu-20-04-%e5%88%a9%e7%94%a8wine5-0playonlinux%e5%ae%89%e8%a3%85windows%e5%ba%94%e7%94%a8%e5%be%ae%e4%bf%a1-736.html)

1、首先，运行64位体系结构的系统需要启用32位体系结构。

```
sudo dpkg --add-architecture i386
```

然后，下载存储库密钥并将其添加到系统中。

```
wget -qO - https://dl.winehq.org/wine-builds/winehq.key | sudo apt-key add -
```

之后，使用以下命令在系统中启用Wine apt存储库。

```
sudo apt-add-repository 'deb https://dl.winehq.org/wine-builds/ubuntu/ focal main'
```

2、在Ubuntu 20.04上安装Wine

您的系统已准备好安装Wine。使用以下命令从apt信息库安装Wine软件包。该--install-recommends选项将在您的Ubuntu 20.04系统上安装winehq稳定版本的所有推荐软件包。

```
sudo apt update
sudo apt install --install-recommends winehq-stable
```

在任何情况下，您在安装过程中都会遇到未满足依赖性的错误，请使用以下命令在Ubuntu上使用aptitude安装wine。

```
sudo apt install aptitude
sudo aptitude install winehq-stable
```

这将在Ubuntu 20.04系统上安装Wine和所有需要的软件包。

3、测试Wine版本

在您的Ubuntu系统上，Wine的安装已经成功完成。使用以下命令检查您系统上安装的Wine版本。

```
wine --version
```

4、安装playonlinux

```
sudo apt-get install playonlinux
```

安装完成之后，从程序里面就可以找到playonlinux启动，到微信官网下载微信Windows安装包，然后点击playonLinux的添加应用程序，选择【安装未在列表中的程序】，然后选择下载好的安装包安装



## 搜狗输入法安装

> https://blog.csdn.net/fangshuo_light/article/details/123634224

1. 官网安装包

```c
https://pinyin.sogou.com/linux/?r=pinyin
```



2. 安装fcitx框架

```c
sudo apt install fcitx-bin
sudo apt-get install fcitx-table
```



3. 终端安装

```c
sudo dpkg -i sogou...版本号.deb
```



4. 设置

Ubuntu右上角找到 “设置”->“区域与语言”->“管理已安装的语言”->"键盘输入法系统“->"fcitx".

电脑重启后，在右上角会有键盘图标，点击 ”配置“，如果没有搜狗输入法，可以点击左下角加号，将搜狗输入法勾选出来。（建议不要把搜狗输入法移动到第一位，不然按shift切换中英文时，有时输入板会出现乱码）。 



可以通过ctrl+空格，或者ctrl+shift切换到搜狗输入法。**如果各种方式试了无法切换。那么可以尝试禁用ubuntu系统 ”设置“-> "键盘快捷键” -> "打字“ 中的切换输入法快捷键**
